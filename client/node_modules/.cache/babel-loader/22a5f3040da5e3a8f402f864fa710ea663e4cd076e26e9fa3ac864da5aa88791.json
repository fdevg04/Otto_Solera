{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fergo\\\\OneDrive\\\\Escritorio\\\\Workspace\\\\GitHub Projects\\\\Otto-Solera-main\\\\client\\\\src\\\\components\\\\ServiceRequests.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/ServiceRequest.css'; // Asegúrate de tener este archivo CSS\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ServiceRequests = () => {\n  _s();\n  const [requests, setRequests] = useState([]);\n  const [search, setSearch] = useState('');\n  const [filteredRequests, setFilteredRequests] = useState([]);\n\n  // Obtener solicitudes de servicio para el cuidador autenticado\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const res = await axios.get('/api/hiring/caregivers/contrataciones', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        setRequests(res.data);\n        setFilteredRequests(res.data);\n      } catch (error) {\n        console.error('Error al obtener solicitudes de servicio:', error);\n      }\n    };\n    fetchRequests();\n  }, []);\n\n  // Manejar la búsqueda y filtrar las solicitudes\n  useEffect(() => {\n    setFilteredRequests(requests.filter(request => request.message.toLowerCase().includes(search.toLowerCase()) || request.beneficiaryId.nombre.toLowerCase().includes(search.toLowerCase())));\n  }, [search, requests]);\n\n  // Aprobar solicitud de servicio\n  const approveRequest = async requestId => {\n    try {\n      const res = await axios.put(`/api/caregivers/caregivers/contrataciones/${requestId}/aceptar`, {}, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      alert(res.data.msg);\n      setRequests(requests.filter(request => request._id !== requestId));\n    } catch (error) {\n      console.error('Error al aprobar la solicitud:', error);\n    }\n  };\n\n  // Rechazar solicitud de servicio\n  const rejectRequest = async requestId => {\n    try {\n      const res = await axios.put(`/api/caregivers/caregivers/contrataciones/${requestId}/rechazar`, {}, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      alert(res.data.msg);\n      setRequests(requests.filter(request => request._id !== requestId));\n    } catch (error) {\n      console.error('Error al rechazar la solicitud:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"service-requests-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"title\",\n      children: \"Solicitudes de Servicio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-bar\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"search-input\",\n        placeholder: \"Buscar por mensaje o nombre del beneficiario\",\n        value: search,\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), filteredRequests.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"requests-list\",\n      children: filteredRequests.map(request => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"request-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"request-message\",\n          children: [\"Mensaje: \", request.message]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Beneficiario: \", request.beneficiaryId.nombre, \" \", request.beneficiaryId.apellidos]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Correo del Beneficiario: \", request.beneficiaryId.correo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Fecha de Solicitud: \", new Date(request.createdAt).toLocaleDateString()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"request-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-approve\",\n            onClick: () => approveRequest(request._id),\n            children: \"Aprobar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-reject\",\n            onClick: () => rejectRequest(request._id),\n            children: \"Rechazar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this)]\n      }, request._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"no-requests-message\",\n      children: \"No tienes solicitudes de servicio pendientes.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(ServiceRequests, \"JszTBTT/zmLnPXdf8Hhn0U9sjac=\");\n_c = ServiceRequests;\nexport default ServiceRequests;\nvar _c;\n$RefreshReg$(_c, \"ServiceRequests\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","ServiceRequests","_s","requests","setRequests","search","setSearch","filteredRequests","setFilteredRequests","fetchRequests","res","get","headers","Authorization","localStorage","getItem","data","error","console","filter","request","message","toLowerCase","includes","beneficiaryId","nombre","approveRequest","requestId","put","alert","msg","_id","rejectRequest","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","length","map","apellidos","correo","Date","createdAt","toLocaleDateString","onClick","_c","$RefreshReg$"],"sources":["C:/Users/fergo/OneDrive/Escritorio/Workspace/GitHub Projects/Otto-Solera-main/client/src/components/ServiceRequests.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/ServiceRequest.css'; // Asegúrate de tener este archivo CSS\n\nconst ServiceRequests = () => {\n  const [requests, setRequests] = useState([]);\n  const [search, setSearch] = useState('');\n  const [filteredRequests, setFilteredRequests] = useState([]);\n\n  // Obtener solicitudes de servicio para el cuidador autenticado\n  useEffect(() => {\n    const fetchRequests = async () => {\n      try {\n        const res = await axios.get('/api/hiring/caregivers/contrataciones', {\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n        });\n        setRequests(res.data);\n        setFilteredRequests(res.data);\n      } catch (error) {\n        console.error('Error al obtener solicitudes de servicio:', error);\n      }\n    };\n\n    fetchRequests();\n  }, []);\n\n  // Manejar la búsqueda y filtrar las solicitudes\n  useEffect(() => {\n    setFilteredRequests(\n      requests.filter(\n        (request) =>\n          request.message.toLowerCase().includes(search.toLowerCase()) ||\n          request.beneficiaryId.nombre.toLowerCase().includes(search.toLowerCase())\n      )\n    );\n  }, [search, requests]);\n\n  // Aprobar solicitud de servicio\n  const approveRequest = async (requestId) => {\n    try {\n      const res = await axios.put(`/api/caregivers/caregivers/contrataciones/${requestId}/aceptar`, {}, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n      });\n      alert(res.data.msg);\n      setRequests(requests.filter((request) => request._id !== requestId));\n    } catch (error) {\n      console.error('Error al aprobar la solicitud:', error);\n    }\n  };\n\n  // Rechazar solicitud de servicio\n  const rejectRequest = async (requestId) => {\n    try {\n      const res = await axios.put(`/api/caregivers/caregivers/contrataciones/${requestId}/rechazar`, {}, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n      });\n      alert(res.data.msg);\n      setRequests(requests.filter((request) => request._id !== requestId));\n    } catch (error) {\n      console.error('Error al rechazar la solicitud:', error);\n    }\n  };\n\n  return (\n    <div className=\"service-requests-container\">\n      <h2 className=\"title\">Solicitudes de Servicio</h2>\n\n      {/* Barra de búsqueda */}\n      <div className=\"search-bar\">\n        <input\n          type=\"text\"\n          className=\"search-input\"\n          placeholder=\"Buscar por mensaje o nombre del beneficiario\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n        />\n      </div>\n\n      {/* Lista de solicitudes */}\n      {filteredRequests.length > 0 ? (\n        <ul className=\"requests-list\">\n          {filteredRequests.map((request) => (\n            <li key={request._id} className=\"request-item\">\n              <h3 className=\"request-message\">Mensaje: {request.message}</h3>\n              <p>Beneficiario: {request.beneficiaryId.nombre} {request.beneficiaryId.apellidos}</p>\n              <p>Correo del Beneficiario: {request.beneficiaryId.correo}</p>\n              <p>Fecha de Solicitud: {new Date(request.createdAt).toLocaleDateString()}</p>\n\n              <div className=\"request-buttons\">\n                <button className=\"btn-approve\" onClick={() => approveRequest(request._id)}>Aprobar</button>\n                <button className=\"btn-reject\" onClick={() => rejectRequest(request._id)}>Rechazar</button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p className=\"no-requests-message\">No tienes solicitudes de servicio pendientes.</p>\n      )}\n    </div>\n  );\n};\n\nexport default ServiceRequests;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}